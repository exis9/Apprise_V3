var __apr_bkeyd=1,_g_aprs_ms=0;function chkAprsTimer(){return Date.now||(Date.now=function(){return(new Date).getTime()}),_g_aprs_ms+200>Date.now()?0:(_g_aprs_ms=Date.now(),1)}function resetAppriseTimer(){_g_aprs_ms=0}function appriseStopKeydown(){__apr_bkeyd=0}function appriseStartKeydown(){__apr_bkeyd=1}function appriseReposition(){var e=$(".appriseOuter");if(e.length){var t=$(document).width(),p=$(window).height();$(window).width()<820?$(".appriseOuter").css("top",$(window).height()/15+"px").css("left",$(window).width()/8+"px"):e.css({top:"100px",left:($(window).width()-$(".appriseOuter").width())/2+$(window).scrollLeft()+"px"}),$(".appriseOverlay").css({width:t+"px",height:p+"px"})}}function appriseNoReturnKeyClosing(e,t,p){apprise(e,t,p,!1)}function apprise(e,t,p,a){if(!chkAprsTimer())return!1;appriseStartKeydown();var i={confirm:!1,verify:!1,password:!1,input:!1,animate:!1,textOk:"Ok",textCancel:"Cancel",textYes:"Yes",textNo:"No"};if(t)for(var n in i)void 0===t[n]&&(t[n]=i[n]);var s=$(document).height(),r=$(document).width();if($("body").append('<div class="appriseOverlay" id="aOverlay"></div>'),$(window).resize((function(){appriseReposition()})),$(".appriseOverlay").click((function(){$(".appriseOuter").fadeOut(400,(function(){$(".appriseOverlay").remove(),$(".appriseOuter").remove()}))})),$(".appriseOverlay").css("height",s).css("width",r).fadeIn(100),$("body").append('<div class="appriseOuter"></div>'),$(".appriseOuter").append('<div class="appriseInner"></div>'),$(".appriseInner").append(e),appriseReposition(),t)if(t.animate){var o=t.animate;isNaN(o)&&(o=400);var u=100;$(window).width()<820&&(u=$(window).height()/15),$(".appriseOuter").css("top","-200px").show().animate({top:u+"px"},o)}else $(window).height()<400?$(".appriseOuter").css("top","10px").fadeIn(200):$(".appriseOuter").css("top","100px").fadeIn(200);else $(window).height()<400?$(".appriseOuter").css("top","10px").fadeIn(200):$(".appriseOuter").css("top","100px").fadeIn(200);if(t){var d="";t.input?("string"==typeof t.input&&(d=t.input),$(".appriseInner").append('<div class="aInput"><input type="text" class="aTextbox" t="aTextbox" value="'+d+'"></div>'),$(".aTextbox").focus()):t.password&&("string"==typeof t.password&&(d=t.password),$(".appriseInner").append('<div class="aInput" style="white-space:nowrap;"><input id="idApprise_pass" type="text" class="aTextbox" t="aTextbox" value="'+d+"\"><label style=\"margin-left:8px;font-size:13px\"><input type=\"checkbox\" onclick=\"if( $(this).is(':checked') ){$('#idApprise_pass').attr('type','password');} else {$('#idApprise_pass').attr('type','text');}\" style=\"margin-right:3px\">非表示?</label></div>"),$(".aTextbox").focus())}$(".appriseInner").append('<div class="aButtons"></div>'),t?t.confirm||t.input||t.password?($(".aButtons").append('<button value="ok">'+t.textOk+"</button>"),$(".aButtons").append('<button value="cancel">'+t.textCancel+"</button>")):t.verify?($(".aButtons").append('<button value="ok">'+t.textYes+"</button>"),$(".aButtons").append('<button value="cancel">'+t.textNo+"</button>")):$(".aButtons").append('<button value="ok">'+t.textOk+"</button>"):$(".aButtons").append('<button value="ok">Ok</button>'),$(document).off("keydown"),$(document).keydown((function(e){if(__apr_bkeyd&&$(".appriseOverlay").is(":visible")){if(13==e.keyCode&&!1!==a){if(!chkAprsTimer())return!1;$(":focus").blur(),$('.aButtons > button[value="ok"]').click()}27==e.keyCode&&$('.aButtons > button[value="cancel"]').click()}}));var c=$(".aTextbox").val();c||(c=!1),$(".aTextbox").keyup((function(){c=$(this).val()})),$(".aButtons > button").click((function(){if(!1!==a&&($(".appriseOverlay").remove(),$(".appriseOuter").remove()),p){var e=$(this).attr("value");"ok"==e?t&&(t.input||t.password)?p(c):p(!0):"cancel"==e&&p(!1)}}))}